{% extends 'base.html' %}
{% load static %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'CSS/style_localizacoes_favoritas.css' %}">
{% endblock %}

{% block title %}PUC-Go — Localizações Favoritas{% endblock %}

{% block content %}




    <main class="conteudo-principal">
        <div class="container-secao-loc-favoritas">
            <h2>Localizações Favoritas</h2>
            <h3>Seus locais salvos no campus</h3>
        </div>


        <div class="container-cards-locais-favoritos">
             {# -------- PRÉDIOS FAVORITOS ---------- #}
            {% for fav in favoritos_predios %}
                {% load l10n %}
                <div class="card-localfav">
                    <p class="titulo">{{ fav.predio.nome }}</p>
                    <p class="subtitulo">{{ fav.predio.nome }}</p>

                
                    <a href="{% url 'mapa:favoritar_predio' fav.predio.id %}">
                    <i data-lucide="heart" class="icone-coracao-preenchido"></i>
                    </a>

                    <p class="descr">
                        {{ fav.predio.descricao|default:"Sem descrição disponível." }}
                    </p>

                    <i data-lucide="map-pin" class="icone-pin"></i>
                    <p class="local">
                        {{ fav.predio.nome }}
                    </p>
                    <a href="{% url 'mapa:mapa' %}?lat={{ fav.predio.coordenadas.0|unlocalize }}&lng={{ fav.predio.coordenadas.1|unlocalize }}" class="btn-marcar-destino">
                        <span class="texto-marcar-destino"></span>Marcar como destino
                    </a>

                </div>
    
            {% empty %}
            {# se não tiver prédios favoritos, não mostra nada aqui #}
            {% endfor %}

            {# -------- LOCAIS FAVORITOS --------- #}
            {% for fav in favoritos_locais %}
                <div class="card-localfav">
                    <p class="titulo">{{ fav.local.nome }}</p>
                    <p class="subtitulo">{{ fav.local.predio.nome }}</p>

                    <a href="{% url 'mapa:favoritar_local' fav.local.id %}">
                    <i data-lucide="heart" class="icone-coracao-preenchido"></i>
                    </a>

                    <p class="descr">
                    {{ fav.local.descricao|default:"Sem descrição disponível." }}
                    </p>

                    <i data-lucide="map-pin" class="icone-pin"></i>
                    <p class="local">
                        {{ fav.local.predio.nome }} – 
                            {% if fav.local.andar.isdigit %}
                                {{ fav.local.andar }}º andar
                            {% else %}
                                {{ fav.local.andar }}
                            {% endif %}
                    </p>
                {% load l10n %}
                <div class="botoes-card-fav">
                <a href="{% url 'mapa:mapa' %}?lat={{ fav.local.predio.coordenadas.0|unlocalize }}&lng={{ fav.local.predio.coordenadas.1|unlocalize }}" class="btn-marcar-destino">
                    <span class="texto-marcar-destino"></span>Marcar como destino
                </a>
                    <a href="{% url 'info_ambientes' fav.local.id %}" class="btn-mais-infos">
                        <span data-lucide="info" class="icone-mais"></span>Mais informações
                    </a>
                </div>
                </div>
        {% empty %}
        
        {% endfor %}

        {% if not favoritos_predios and not favoritos_locais %}
            <p>Você ainda não tem localizações favoritas.</p>
        {% endif %}
        </div>
    </main>



{% endblock %}